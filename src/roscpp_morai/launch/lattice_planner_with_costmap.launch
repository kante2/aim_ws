<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <!-- ========================================
         Lattice Planner with LiDAR Costmap
         ======================================== -->
    
    <!-- Costmap Node (LiDAR 기반) -->
    <node name="lidar_costmap_node" pkg="roscpp_morai" type="lidar_aabb_costmap_node" output="screen">
        <param name="lidar_topic" value="/points_raw" />
        <param name="grid_size_x" value="100" />
        <param name="grid_size_y" value="100" />
        <param name="resolution" value="0.1" />
    </node>
    
    <!-- Lattice Planner Node -->
    <node name="lattice_planner_with_costmap_node" pkg="roscpp_morai" type="lattice_planner_with_costmap_node" output="screen">
        <!-- Topics -->
        <param name="costmap_topic" value="/costmap" />
        <param name="goal_topic" value="/goal_pose" />
        <param name="odom_topic" value="/odom" />
        <param name="path_topic" value="/lattice_path" />
        
        <!-- Planning parameters -->
        <param name="planning_frame" value="map" />
        <param name="robot_frame" value="base_link" />
        <param name="max_planning_iterations" value="50000" />
        <param name="planning_rate" value="10.0" />  <!-- 10 Hz -->
    </node>
    
    <!-- RViz 시각화 -->
    <node name="rviz" pkg="rviz" type="rviz" args="-d $(find roscpp_morai)/config/lattice_planner.rviz" />
    
</launch>
