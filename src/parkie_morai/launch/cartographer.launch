<launch>
  <!-- ===== Args ===== -->
  <arg name="open_rviz"           default="true"/>
  <arg name="use_sim_time"        default="false"/>
  <arg name="scan_topic"          default="/scan"/>

  <!-- Cartographer 설정 파일 경로 -->
  <arg name="configuration_directory" default="$(find parkie_morai)/config"/>
  <arg name="configuration_basename"  default="cartographer.lua"/>

  <!-- OccupancyGrid 설정 -->
  <arg name="resolution"         default="0.05"/>
  <arg name="publish_period_sec" default="0.5"/>

  <!-- 시뮬/실기기 시간 -->
  <param name="use_sim_time" value="$(arg use_sim_time)"/>

  <!-- Cartographer SLAM 노드 -->
  <node pkg="cartographer_ros" type="cartographer_node" name="cartographer_node" output="screen"
        args="-configuration_directory $(arg configuration_directory)
              -configuration_basename  $(arg configuration_basename)">
    <remap from="scan" to="$(arg scan_topic)"/>
  </node>

  <!-- OccupancyGrid(/map) 퍼블리셔 -->
  <node pkg="cartographer_ros" type="cartographer_occupancy_grid_node" name="occupancy_grid_node" output="screen"
        args="-resolution $(arg resolution) -publish_period_sec $(arg publish_period_sec)"/>

  <!-- RViz (원하면 켜기) -->
  <node if="$(arg open_rviz)" pkg="rviz" type="rviz" name="rviz"
        args="-d $(find parkie_morai)/rviz/slam.rviz"/>
</launch>
